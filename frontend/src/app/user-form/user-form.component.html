<div class="container">

  <div class="horiz-center">

    <form [formGroup]="userFormGroup" (ngSubmit)="createOrUpdateUser()" class="user-form__form">

      <!--<div><img [src]="'api/media/download/' + userFormGroup.controls.pictures[0].pk + '/'" *ngIf="userFormGroup.controls.pictures[0].pk"/></div>-->

      <!--<span>
          <span *ngFor="let picture of pictures">
            <button class="grow" [matMenuTriggerFor]="menu">
              <img src="api/media/{{picture}}" height="30px"><br>
            </button>
          </span>
        </span>-->

      <!--<ng-container>
        <img src="/assets/image/user.png" height=30px *ngIf="!userFormGroup.controls.pictures">
        <tr mat-cell *matCellDef="let element"> <img [src]="'/api/media/download/' + element.pictures + '/'" height=30px *ngIf="userService.hasProfilePic"></tr>

      </ng-container>-->
      <!--<img [src]="'api/media/' + userFormGroup.controls.pictures[0].pk" >
      <mat-hint align="end">pictures</mat-hint>-->

      <!--{{userFormGroup.value.pictures[0].pk}}-->

      <mat-form-field>
        <input matInput type="text" placeholder="Username" formControlName="username" required>
        <mat-hint align="end">Username</mat-hint>
        <mat-error *ngIf="userFormGroup.controls.username.hasError('required')">Username is required</mat-error>
      </mat-form-field>


      <mat-form-field>
        <input matInput type="text" placeholder="First Name" formControlName="first_name" required>
        <mat-hint align="end">First Name</mat-hint>
        <mat-error *ngIf="userFormGroup.controls.first_name.hasError('required')">First Name is required</mat-error>
      </mat-form-field>

      <mat-form-field>
        <input matInput type="text" placeholder="Last Name" formControlName="last_name" required>
        <mat-hint align="end">Last Name</mat-hint>
        <mat-error *ngIf="userFormGroup.controls.last_name.hasError('required')">Last Name is required</mat-error>
      </mat-form-field>

      <mat-form-field>
        <input matInput type="email" placeholder="Email" formControlName="email" ngModel [email]="true" required>
        <mat-hint align="end">E-Mail</mat-hint>
        <mat-error *ngIf="userFormGroup.controls.email.hasError('required')">Email is required</mat-error>
        <mat-error *ngIf="userFormGroup.controls.email.hasError('email')">Enter a valid Email address</mat-error>
      </mat-form-field>

      <mat-form-field>
        <input matInput type="password" placeholder="Enter Password" formControlName="password" required minlength="6">
        <mat-hint align="end">Password</mat-hint>
        <mat-error *ngIf="userFormGroup.controls.password.hasError('required') ">Password is required</mat-error>
        <mat-error *ngIf="userFormGroup.controls.password.hasError('minlength') ">Password is not secure!</mat-error>
      </mat-form-field>

      <mat-checkbox formControlName="is_active" *ngIf="userService.hasPermission('aceofclubs.change_user')">Is Active?
      </mat-checkbox>
      <!--*ngIf="userService.hasPermission('aceofclubs.change_user')"-->

      <mat-checkbox formControlName="is_staff" *ngIf="userService.hasPermission('aceofclubs.change_user')">Is Admin?
      </mat-checkbox>

      <div>
        <app-mediainput formControlName="pictures" [single]="true"></app-mediainput>
      </div>

      <br/>

      <mat-card-actions align="center">
        <!-- <button mat-raised-button color="primary" [disabled]="!userFormGroup.valid"> -->
        <button mat-raised-button color="primary">
          <span *ngIf="!userFormGroup.controls.pk.value">Create</span>
          <span *ngIf="userFormGroup.controls.pk.value">Update</span>
        </button>
      </mat-card-actions>
    </form>
  </div>


  <!-- nicht  im Form, sonst kommt ein  Fehler bzw eine Warnung -->

  <div class="group-add">
    <button (click)="userService.setUserGroupEntry()" mat-raised-button color="primary">Add to Group
    </button>
  </div>


  <div class="group-editOrDelete">
    <button mat-raised-button color="primary" [routerLink]="'/user-group-list/' + this.userService.clickedUser">View/Delete Group
    </button>
  </div>

  <div class="userEvent-editOrDelete">
    <button mat-raised-button color="primary" [routerLink]="'/user-event-list/' + this.userService.clickedUser">View/Delete Event Entries
    </button>
  </div>
</div>

<!-- nicht  im Form, sonst kommt ein  Fehler bzw eine Warnung -->



